<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="google-site-verification" content="VOAqlvL1BbL_Glqy47fldDLcHlz8MjARlIfftmcdios"><link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png"><link rel="icon" href="/assets/favicon.ico"><meta property="og:title" content="Chrome Extension “Receiving end does not exist.”"><meta property="og:type" content="website"><meta property="og:url" content="http://romanisthere.github.io/"><meta property="og:description" content="You must have faced such an error if you ever developed an extension."><meta property="og:image" content="/assets/posts/receiving.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:src" content="http://romanisthere.github.io/assets/posts/receiving.jpg"><meta name="description" content="You must have faced such an error if you ever developed an extension."><meta name="keywords" content="HTML, CSS, JavaScript, React, Preact, Development, Non-commerical, Open-source, Roman Smunyov, RomanistHere, PopUpoff, blog, independent, developer"><title>Chrome Extension “Receiving end does not exist.”</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#324758"><link rel="shortcut icon" href="/favicon.ico"><style>:root{--dark-color1:#3e596c;--dark-color1:#324758;--dark-color2:#000926;--dark-color3:#1b283b;--dark-color4:#0e1f37;--blue-color1:#124e8a;--blue-color2:#2c6f86;--blue-color3:#154454;--yellow-color1:#cbcc7f;--yellow-color2:#c6b763;--gray-color:#b9b9c2;--white-color:#d7e3ff;--violet-color:#846b80;--pink-color:#99677b;--tom-color:#61718e;--jerry-color:#6e4532;--pink:pink;--def-trs:all ease .3s;--hand-font:"GloriaHallelujah";--hand-font2:"PermanentMarker";--pad-txt:30px;--bg-color2:#6ea1be;--bg-color1:#dadee0;--text-color1:#24305e;--text-color1:var(--third-bg-color);--main-bg-color:var(--dark-color1);--second-bg-color:var(--jerry-color);--third-bg-color:var(--dark-color3);--main-text-color:var(--yellow-color2);--art-fz:20px;--art-fz-title:52px;--art-fz-subtitle:25px;--art-lh:1.7;--art-lh-title:1.558;--art-lh-subtitle:1.64;--art-margin-1:34px;--art-margin-2:13px}@media screen and (max-width:1024px){:root{--art-fz:18px;--art-fz-title:47px;--art-fz-subtitle:23px;--art-lh:31px;--art-lh-title:73px;--art-lh-subtitle:38px;--art-margin-1:31px;--art-margin-2:12px}}@media screen and (max-width:735px){:root{--art-fz-title:37px;--art-lh:29px;--art-lh-title:57px;--art-lh-subtitle:36px;--art-margin-1:29px;--art-margin-2:11px}}@media screen and (max-width:360px){:root{--pad-txt:20px;--art-fz:16px;--art-fz-title:33px;--art-fz-subtitle:20px;--art-lh:26px;--art-lh-title:51px;--art-lh-subtitle:32px;--art-margin-1:26px;--art-margin-2:6px}}body,html{position:relative;width:100%;height:100%;margin:0;padding:0;background-color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;line-height:1.59;font-weight:300;font-size:18px;color:var(--main-text-color);-webkit-tap-highlight-color:transparent;background-color:var(--main-bg-color)}h1,h3{margin:0;font-weight:400}li,ul{margin:0;padding:0;list-style:none}strong{font-weight:unset}body{scrollbar-color:var(--main-text-color) var(--dark-color4)}body::-webkit-scrollbar{width:10px}body::-webkit-scrollbar-track{background:var(--dark-color4)}body::-webkit-scrollbar-thumb{background:var(--main-text-color)}.link{color:var(--text-color1);text-decoration:none;border-bottom:2px solid var(--third-bg-color);transition:var(--def-trs)}@media (hover:hover){.link:hover{color:var(--bg-color2);border-color:var(--bg-color2)}}.link_back{position:fixed;z-index:2;padding:10px;bottom:10px;right:10px;color:var(--txt-color2);font-family:var(--hand-font2);font-size:20px}@media screen and (max-width:1024px){.link_back{font-size:18px}}@media (hover:hover){.link_back__shadow{position:fixed;opacity:0;z-index:-1;top:0;left:0;right:0;bottom:0;transition:var(--def-trs)}}:root{--swiper-theme-color:#007aff;--swiper-navigation-size:44px}.article{position:relative;width:676px;margin:50px auto;padding:60px;border:20px solid var(--third-bg-color);box-shadow:5px 5px 10px 0 rgba(0,0,0,.75);background-color:var(--bg-color1);color:var(--text-color1);font-size:var(--art-fz);line-height:var(--art-lh)}.article__title{margin:0 0 var(--art-margin-1);font-size:var(--art-fz-title);line-height:var(--art-lh-title)}.article__subtitle,.article__title{color:var(--post-color2);font-weight:700}.article__subtitle{margin:var(--art-margin-1) 0 var(--art-margin-2);font-size:var(--art-fz-subtitle);line-height:var(--art-lh-subtitle);transition:var(--def-trs)}.article__date{margin:0;opacity:.7;text-align:right;font-weight:100}.article__img{width:100%;min-height:275px}.article__text{margin:0 0 var(--art-margin-1)}.article__col-4{background-color:rgba(110,69,50,.15);transition:background-color .7s ease 0s}.article__list{padding-left:22px}.article__list_item{list-style:circle}@media screen and (max-width:1024px){.article{padding:30px;border-width:15px;width:90%;max-width:676px;box-sizing:border-box}.article__img{min-height:235px}}@media screen and (max-width:735px){.article{margin:0;width:100%;max-width:100%;padding:var(--pad-txt) var(--pad-txt) 40px;border:none}.article__date{padding-bottom:20px}.article__img{min-height:unset}}.draw{position:fixed;top:0;left:0}.draw_popup{position:fixed;right:10px;top:100px;width:190px;transform:translateX(110%);border:8px solid var(--third-bg-color);box-shadow:5px 5px 10px 0 rgba(0,0,0,.75);background-color:var(--bg-color1);color:var(--text-color1);line-height:var(--art-lh);text-align:center}@media screen and (max-width:1024px){.draw{display:none}}.post{position:relative;font-weight:400}@media screen and (max-width:1024px){.post{padding-bottom:10px}.post__back{position:absolute}}@media screen and (max-width:735px){.post{padding-bottom:0}}</style><link href="/bundle.b5cbf.css" rel="stylesheet" media="only x" onload="this.media='all'"><noscript><link rel="stylesheet" href="/bundle.b5cbf.css"></noscript></head><body><noscript>You need to enable JavaScript to see this website. Come on mate, it's 2020 :).</noscript><section class="post"><aside class="draw_popup">Click to change colors Double click to reset</aside><canvas class="draw"></canvas><main class="article"><h1 class="article__title">Chrome Extension “Receiving end does not exist.”</h1><img src="/16f47231158068f7a5783ddd8b07e81b.jpg" alt="Chrome Extension “Receiving end does not exist.”" loading="lazy" class="article__img"><article class="article__text"><p class="article__text">I have personally spent a tremendous amount of time investigating this problem. Let's see why it's trickier than it seems like.</p><p class="article__text">There are actually <strong class="article__col-4">three main points</strong> what could go wrong if you're facing this problem with your extensions:</p><h3 class="article__subtitle part1">Not following the official API</h3><p class="article__text">Google writes pretty decent tutorials and explanations, so I won't be copywriting it. <strong class="article__col-4"><a href="https://developer.chrome.com/extensions/messaging" rel="noreferrer" target="_blank" class="link">This article</a> is a great showcase</strong> of what and in what cases you should be doing to make a chat between your scripts. The hints:</p><ul class="article__list article__text"><li class="article__list_item"><a href="https://developer.chrome.com/extensions/runtime#method-sendMessage" rel="noreferrer" target="_blank" class="link">How to send a message</a> (sendMessage). <a href="https://github.com/RomanistHere/PopUpOFF/blob/develop/content/content.js#L62" rel="noreferrer" target="_blank" class="link">Live example</a> in PopUpOFF content script.</li><li class="article__list_item"><a href="https://developer.chrome.com/extensions/runtime#event-onMessage" rel="noreferrer" target="_blank" class="link">How to handle it</a> - get and process (onMessage). <a href="https://github.com/RomanistHere/PopUpOFF/blob/develop/background/background.js#L90" rel="noreferrer" target="_blank" class="link">Example</a> from background.js.</li><li class="article__list_item"><strong class="article__col-4">Don't use 'chrome.extension.sendRequest || .onRequest' or 'chrome.extension.sendMessage || .onMessage'</strong> if you don't need to support the Chrome oldest versions. You most likely don't.</li></ul><p class="article__text">You know it all well already? Still doesn't work?</p><h3 class="article__subtitle part2">You must've messed scripts up.</h3><p class="article__text">Make sure your background/content scripts are <strong class="article__col-4">updated, loaded (reloaded) and available</strong> to each other at <strong class="article__col-4">the very same moment</strong> you're trying to pass a message. Try incognito mode, disable all other extensions, go get some <s>cofee</s>water. If you're pretty sure you did everything right, but it's not working anyway - take counsel of one's pillow.</p><p class="article__text"><strong class="article__col-4">It is working</strong>, but the error keeps randomly appearing? Why didn't you tell me at the start? Let's go see why:</p><h3 class="article__subtitle part2">Browser getting you there</h3><p class="article__text">Every time you update the dev version of your extension, Chrome, or whatever browser you use, starts to use <strong class="article__col-4">the newest version of your scripts on the opened pages (if you interact with any) but content scripts are kept from the previous "version"</strong>. They are not updating automatically (you most likely set the property "run_at": "document_end", so don't blame the browser). So, technically, <strong class="article__col-4">you're trying to reach the not injected (yet!) content script from the new version - but there is no</strong> (because you didn't load the page after the extensions update), so the browser throws an error. But it can work just as well because your new script can be identical to the old one.</p><p class="article__text">What to do then? Basically, you can <strong class="article__col-4">track if an old connection is not needed</strong> and disable it or manually update your scripts. I'm going to write an article about it later.</p><p class="article__text">If your content script in production is updating only with the extension itself, it should not be a problem. But now you know why you're getting this error during the development and not in production.</p><p class="article__text">Thank you for attention and have a great life now. See ya!</p></article><p class="article__date">Sep 14, 2020</p></main><a href="/" class="post__back link_back">To main page</a><div class="link_back__shadow"></div></section><script type="__PREACT_CLI_DATA__">%7B%22preRenderData%22:%7B%22url%22:%22/posts/receiving-end%22,%22ogTitle%22:%22Chrome%20Extension%20%E2%80%9CReceiving%20end%20does%20not%20exist.%E2%80%9D%22,%22description%22:%22You%20must%20have%20faced%20such%20an%20error%20if%20you%20ever%20developed%20an%20extension.%22,%22img%22:%22/assets/posts/receiving.jpg%22%7D%7D</script><script nomodule="">!function(){var e=document,t=e.createElement("script");if(!("noModule"in t)&&"onbeforeload"in t){var n=!1;e.addEventListener("beforeload",function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute("nomodule")||!n)return;e.preventDefault()},!0),t.type="module",t.src=".",e.head.appendChild(t),t.remove()}}();</script><script crossorigin="anonymous" src="/bundle.8831a.esm.js" type="module"></script><script nomodule="" src="/polyfills.96e98.js"></script><script nomodule="" defer="defer" src="/bundle.2f2cb.js"></script></body></html>